## 索引

### 什么是索引？ 有什么用？
```
索引就相当于一本书的目录，通过目录可以快速的找到对应的资源。
在数据库方面，查询一张表的时候有两种检索方式：
第一种方式：全有扫描
第二种方式：根据索引检索（效率很高）

索引为什么可以提高检索效率呢？
其实最根本的原理是缩小了扫描的范围

索引虽然可以提高检索效率，但是不能随意的添加索引，因为索引也是数据库当中的对象，也需要数据库不断的维护，是有维护成本的，比如，表中的数据 经常被修改，这样就不适合添加索引，因为数据一旦修改，索引需要重新排序，进行维护。

select A表字段 from A表 where A表字段 = 'aaa';
当A表字段没有添加索引的时候,以上sql语句会进行全表扫描，扫描A表字段中的所有的值。
当A表字段添加索引的时候，以上sql语句根据索引扫描，快速定位。
```

### 怎么创建索引？怎么删除索引对象?
```
创建索引对象
create index 索引名 on 表名(字段名);
删除索引对象
drop index 索引名称 on 表名;

```

### 什么时候考虑给字段添加索引？（满足什么条件）
```
数据量庞大。
该字段很少的dml操作。（因为字段进行修改操作，索引也需要维护）
该字段经常出现在where子句中。（经常根据那个字段查询）
```

### 主键和具有unique约束的字段会自动添加索引。

### 怎么优化索引
```
比如一条语句
select A表字段 from A表 where A表字段 = '***';
要查看这条语句有没有用到索引
explain select A表字段 from A表 where A表字段 = '***';
+----+-------------+----------+------------+------+---------------+------+---------+------+------+----------+-------------+
| id | select_type | table    | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |
+----+-------------+----------+------------+------+---------------+------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | products | NULL       | ALL  | NULL          | NULL | NULL    | NULL |    4 |    25.00 | Using where |
+----+-------------+----------+------------+------+---------------+------+---------+------+------+----------+-------------+

执行后能看到type这项是ALL，代表是全表扫描，rows扫描了4次

然后我们创建一个索引
create index products_code_index on products(code);

+----+-------------+----------+------------+------+---------------------+---------------------+---------+-------+------+----------+-------------+
| id | select_type | table    | partitions | type | possible_keys       | key                 | key_len | ref   | rows | filtered | Extra       |
+----+-------------+----------+------------+------+---------------------+---------------------+---------+-------+------+----------+-------------+
|  1 | SIMPLE      | products | NULL       | ref  | products_code_index | products_code_index | 1023    | const |    1 |   100.00 | Using index |
+----+-------------+----------+------------+------+---------------------+---------------------+---------+-------+------+----------+-------------+

可以看到type变成ref，还可以看到用到了那个索引。


```


### 索引底层采用的数据结构是: B + Tree


### 索引的实现原理


### 索引的分类
```
单一索引：给单个字段添加索引
复合索引：给多个字段联合起来添加一个索引
主键索引：主键会自动添加索引
唯一索引：
```