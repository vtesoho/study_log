# gc

go v1.3之前的标识清除法(mark and sweep)

1. 暂停程序业务逻辑，找出不可达的对象，和可达对象
2. 开始标记，找出它所有可达的对象，并做上标识
3. 标记完了之后，然后开始清除未标记的对象
4. 停止暂停，让程序继续跑。然后循环重复这个过程，直接process程序生命周期结束。


标记清除的方法缺点

1. SWT, stop the world，让程序暂停，程序出现卡顿
2. 标记需要扫描整个heap
3. 清除数据会产生heap碎片




go v1.5三色标记法

1. 只要是创建的对象，默认颜色都是白色
2. 每次GC回收开始，然后从根节点开始遍历所有对象，把遍历到的对象从白色集合放入灰色中
3. 遍历灰色集合，将灰色对象引用的对象从白色集合放入灰色集合，之后将此对象放入黑色集合
4. 重复第三步，直到灰色中无任何对象
5. 回收所有的白色标记表的对象，也就是回收拉级