# shell脚本格式化输出

计算机程序其实就是三步:输入、运算、输出，这个理论也适应于shell编程。

那么计算机是如何将信息按照比较舒服的格式输出到屏幕或者KFC的打印纸上的呢！如果让计算机能够输出一种格式，让人看起来很舒服，那么我们就要学习一下计算机的格式化输出，让计算机程序将信息输出的时候美美哒！让人一目了然看到需要的信息。


## 一、shell格式化输出

一个赏心悦目的界面是一个程序给用户的第一个映像，好的界面可以让用户更加容易上手使用。windows之所以能被个人用户喜欢就是因为它的界面更加容易和用户交互，只要用户能识别文字，懂得点击鼠标就能操作电脑；而linux之所以无法被广大个人用户使用的瓶颈就是图形界面无法完成所有工作，需要命令配合才可以，这就把非专业用户拒之门外了，想用就必须去学习命令。
我们在使用shell写一个程序的时候，如果想让广大的用户都能使用，都能快速上手，那么好的交互界面就太重要了。我们可以使用多种方法开发好的、易交互的界面，常用的工具有：dialog、echo、printf等命令。
本节课主要给大家介绍一个最简单易用的命令：echo


1、echo命令


功能：将内容输出到默认显示设备

应用场景：需要计算机程序输出的地方

echo命令的功能是在显示器上显示一段文字，一般起到一个提示的作用。 功能说明:显示文字。
```
语法:echo [-ne][字符串]

补充说明:
1、echo会将输入的字符串送往标准输出。
2、输出的字符串间以空白字符隔开,并在最后加上换行号。

OPTIONS：
-n	不要在最后自动换行
-e	若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出:

转义字符
\a	发出警告声;
\b	删除前一个字符;
\t	插入tab;
\n	换行且光标移至行首;

\c	最后不加上换行符号;
\f	换行但光标仍旧停留在原来的位置;
\r	光标移至行首，但不换行;
\v	与\f相同;
\		插入\字符;
\0nnn	打印nnn(八进制)所代表的ASCII字符;  备注：数字0  不要理解成字母o
\xNN  打印NN(十六进制)所代表的ASCII字符;

-–help	显示帮助
-–version显示版本信息


你的进制转换过关吗？
[root@zutuanxue ~]# echo -e "\0123"   #ot(123) = 83  对应ascii表的S
S
[root@zutuanxue ~]# echo -e "\x61"   #ox(61) = 97  对应ascii表的a
a
```


2、输出颜色字体

```
格式如下：

echo -e "\033[字背景颜色；文字颜色m字符串\033[0m"

下面是相应的字和背景颜色，可以自己来尝试找出不同颜色搭配

　　例
　　echo -e “\033[31m 红色字 \033[0m”
　　echo -e “\033[34m 黄色字 \033[0m”
　　echo -e “\033[41;33m 红底黄字 \033[0m”
　　echo -e “\033[41;37m 红底白字 \033[0m”
　　
字颜色：30—–37
　　echo -e “\033[30m 黑色字 \033[0m”
　　echo -e “\033[31m 红色字 \033[0m”
　　echo -e “\033[32m 绿色字 \033[0m”
　　echo -e “\033[33m 黄色字 \033[0m”
　　echo -e “\033[34m 蓝色字 \033[0m”
　　echo -e “\033[35m 紫色字 \033[0m”
　　echo -e “\033[36m 天蓝字 \033[0m”
　　echo -e “\033[37m 白色字 \033[0m”

　　
字背景颜色范围：40—–47
　　echo -e “\033[40;37m 黑底白字 \033[0m”
　　echo -e “\033[41;37m 红底白字 \033[0m”
　　echo -e “\033[42;37m 绿底白字 \033[0m”
　　echo -e “\033[43;37m 黄底白字 \033[0m”
　　echo -e “\033[44;37m 蓝底白字 \033[0m”
　　echo -e “\033[45;37m 紫底白字 \033[0m”
　　echo -e “\033[46;37m 天蓝底白字 \033[0m”
　　echo -e “\033[47;30m 白底黑字 \033[0m”
　　
最后面控制选项说明
　　\033[0m 关闭所有属性
　　\033[1m 设置高亮度
　　\033[4m 下划线
　　\033[5m 闪烁
　　\033[7m 反显
　　\033[8m 消隐

　　\033[30m — \33[37m 

设置前景色
　　\033[40m — \33[47m 设置背景色
　　
　　
　　\033[nA 光标上移n行
　　\033[nB 光标下移n行
　　\033[nC 光标右移n行
　　\033[nD 光标左移n行
　　\033[y;xH设置光标位置
　　\033[2J 清屏
　　\033[K 清除从光标到行尾的内容
　　\33[s 保存光标位置
　　\033[u 恢复光标位置
　　\033[?25l 隐藏光标
　　\033[?25h 显示光标
　　
用法例子  光标下移三行　　
[root@zutuanxue ~]# echo -e "\033[0m today is fine \033[3B"
 today is fine 
```


echo输出缩进问题
字体颜色输出

```
job代码    01_fruits_shop.sh
#!/bin/bash
# 
#Author: www.zutuanxue.com
#Release: 
#Description:打印水果超市列表

echo -e "\t\t    \033[32m Fruits List \033[0m      \n"
echo -e "\t   \033[31mFruit\033[0m   \t\t \033[31mPrice\033[0m \t\t\033[31mWeight\033[0m"
echo -e "\t\033[34m1)Apple\t\t￥10.00\t\t1KG\033[0m"
echo -e "\t\033[34m2)Banana\t￥9.00\t\t1KG\033[0m"
echo -e "\t\033[34m3)Orange\t￥15.20\t\t1KG\033[0m"
```


一个班级学员信息系统，要求存储学员ID、NAME、SCORE、AGE、GENDER，班级有50个人，思考如何解决交互中数据存储的问题。很多人可能直接说或定义变量接收数据不就行了！nice，你很棒！！
解决方案如下：
1）每个学生通过5个变量，一个班级50个学生，5*50=250，妥妥的！我定义250个变量接收就可以了，美美哒！

兄弟，现在不是全班了是全校的学生需要录入你这个信息系统，你写变量吧！！当我提出这个需求的时候，作为开发你会不会想骂娘呢？

2）使用数组来定义，我只需要定义5个数组来接收所有用户的数据就可以了，5个数组就能解决一切，你觉得你会不会想了解下数组是什么呢？

一、数组介绍
数组可以让用户一次赋予多个值，需要读取数据时只需通过索引调用就可以方便读出了。

普通数组：只能使用整数作为数组索引(元素的索引)
关联数组：可以使用字符串作为数组索引(元素的索引)

二、数组定义
				数组名称=(元素1 元素2 元素3 ...)
三、数组赋值方式
一次附一个值
变量名=变量值
array[0]=v1
array[1]=v2
array[3]=v3
一次附多个值
array=(var1 var2 var3 var4)
array1=(`cat /etc/passwd`)			//将文件中每一行赋值给array1数组
array2=(`ls /root`)
array3=(harry amy jack "Miss zhang")
array4=(1 2 3 4 "hello world" [10]=linux)
四、数组取值
取值方式: ${数组名称[索引]}

索引: 默认情况下索引是指数组中的元素[存的值]在数组中的顺序，从0开始计数，关联数组除外。比如：
array=(var1 var2 var3 var4)
array数组中存有4个元素，分别是：var1 var2 var3 var4
那么我想取出var2这个元素，那么就得先看看他在数组中的位置，数组中的元素索引如下:

		元素	var1 var2 var3 var4
		索引	0     1     2    3
所以正确表示array数组中元素var2的方式是：${array[1]}

数组取值练习

${array[i]}  i表示元素的索引
使用@ 或 * 可以获取数组中的所有元素：
获取第一个元素
echo ${array[0]}
echo ${array[*]}			获取数组里的所有元素
echo ${#array[*]}			获取数组里所有元素个数
echo ${!array[@]}    	获取数组元素的索引索引
echo ${array[@]:1:2}    访问指定的元素；1代表从索引为1的元素开始获取；2代表获取后面几个元素
五、关联数组
5.1 定义管理数组
关联数组使用首先需要申明该数组为关联数组，申明方式： declare -A 数组名称

首先声明关联数组
declare -A asso_array1
declare -A asso_array2
declare -A asso_array3
5.2关联数组赋值
一次赋一个值
数组名[索引]=变量值
[root@zutuanxue ~]# asso_array1[linux]=one
[root@zutuanxue ~]# asso_array1[java]=two
[root@zutuanxue ~]# asso_array1[php]=three
一次附多个值
[root@zutuanxue ~]# asso_array2=([name1]=harry [name2]=jack [name3]=amy [name4]="Miss zhang")
查看关联数组
[root@zutuanxue ~]# declare -A
declare -A asso_array1='([php]="three" [java]="two" [linux]="one" )'
declare -A asso_array2='([name3]="amy" [name2]="jack" [name1]="harry" [name4]="Miss zhang" )'
管理数组取值
[root@zutuanxue ~]# echo ${asso_array1[linux]}
one
[root@zutuanxue ~]# echo ${asso_array1[php]}
three
[root@zutuanxue ~]# echo ${asso_array1[*]}
three two one
[root@zutuanxue ~]# echo ${!asso_array1[*]}
php java linux
[root@zutuanxue ~]# echo ${#asso_array1[*]}
3
[root@zutuanxue ~]# echo ${#asso_array2[*]}
4
[root@zutuanxue ~]# echo ${!asso_array2[*]}
name3 name2 name1 name4
六、课堂练习
2.1 写一个监控CPU 平均负载值的脚本
案例需求
分别打印CPU 1min 5min 15min load负载值

案例思路

1、如何取CPU负载值，有哪些命令
2、如果存储在内存中，变量、数组
案例步骤

1、收集cpu load 平均负载值到数组
2、打印输出对应的负载值
代码实现

#!/bin/bash
# 
#Author: www.zutuanxue.com
#
#Release: 
#Description: 打印cpu 1min 5min 15min的负载值

#1、收集负载值
cpu_load=(`uptime|tr -s " "|cut -d " " -f9-11|tr "," " "`)
#2、输出负载值
echo "CPU 1 min平均负载为: ${cpu_load[0]}"
echo "CPU 5 min平均负载为: ${cpu_load[1]}"
echo "CPU 15 min平均负载为: ${cpu_load[2]}"
代码效果

[root@zutuanxue day2]# sh cpu_load.sh 
CPU 1 min平均负载为: 0.00
CPU 5 min平均负载为: 0.01
CPU 15 min平均负载为: 0.05