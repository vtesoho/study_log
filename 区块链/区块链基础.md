# 区块链基础

### 区块链的产生
1. 密码朋克：通过匿名性来保护隐私安全
2. 不可修改的文件记录；利用时间戳加盖到文件内容中，证实数据的真实存在性与不可修改性
3. 初化加密货币；现有区块链加密货币前身



### 区块链的发展历史 

1. 09年比特币创世区块产生  1.0
2. 2014年，以太访诞生  2.0
3. 18年中期, EOS主网上线  3.0
4. fabric 联盟链的代表


### 区块场景概念

1. 数字货币：可以与现金等价交换，理论上拥有现金流的一切功能和属性（与虚拟币的区别），数字特性（与现金流的区别）
2. ico：产生一个项目亮点，认可它价值和发展潜力，希望筹集资金去实现这个项目。
3. 韭菜：被坑的散户和大户（一部分的投资人）
4. 电子钱包：在电子商务购物活动中常用的支付工具

### 什么是区块链

1. 区块链是一种集成了(共识算法，现代密码学，点对点传输协议，分布式数据存储)新的应用模型



### 区块链的特点

1. 可追溯
2. 不可簒改
3. 去中心化
4. 完整备份：区块链具有完整的分布式存储特性
5. 历史记录：被存储的数据拥有完整的历史记录，可以快速的查看以及复原
6. 交易广播：一次产交易分发给网络的其它节点，同步接收



### 加密货币(bitcoin,eth,eos...)的特点

1. 独立性：所有货币都是独立的存在
2. 唯一性：地址，交易哈希都有不重复的唯一性
3. 匿名性：帐户和个人信息没有关联，所有交易全程加密
4. 不可伪造(簒改)：基于加密与时间戳，全程不可簒改


### 区块链的核心技术

1. 共识算法：数据一致性
2. 现代密码学：公私钥签名、安全
3. 点对点传输协议：在网络中的数据流通
4. 分布式数据存储：实现去中心化的重要技术依据



### 区块链的核心概念

1. 区块链
    * 区块链本质上是一个分布式的账本，通过共识算法来决定谁能抢到记账权，区块链以区块为单位，以区块产生时间为顺序进行。区块中保存的是交易数据。每个当前区块中保存了上一个区块的哈希值，所有交易都可以在区块链中进行追溯，账本只可以追加，不能簒改。
2. 区块
    * 结构
        - 区块头
            + 时间戳
            + 区块号码
            + 前区块哈希
            + 当前区块哈希
            + 随机数
            + merkle
        - 区块体
            + 交易数据
    * 分布式数据库
        - 区块链中的区块都会存储在每一个节点中，所有的节点就组成了一个分布式数据库，任何一个节点出现问题，都不会影响到其它节点，因为其它节点都保存了完整的数据
    * 节点
        - 节点可以理解成一个运行区块链软件的计算机
        - 分类
            1. 全节点：保存了完整的区块链副本
            2. 轻节点：不保存所有的区块，需要依赖全点节进行验证
            3. 挖矿节点：带有挖矿功能的节点，专门处理交易验证（挖矿）的节点，保存了完整的区块链副本。
    * 挖矿
        1. 说明：区块是在挖矿的过过程中产生的
        2. 概念：穷举随机数的算法，把上一个区块的哈希加上10分钟之内产生的所有交易加上随机数通过哈希256产生一个哈希值，只要随机数满足一定的条件，就可以抢到此次交易的记账权。新生产的节点需要进行广播，让其它节点进行验证，防止造假。
    * 分叉-挖矿分叉
        1. 两个或者多个矿工，同时完成了工作量证明，就会同时产生两个新的区块，形成分叉。
        2. 解决文案：不同的矿工跟随了不同的区块，由于不同的链上面，算力是有区别，也就是说，矿工的数量是不一样的。
        3. 由于矿工数量与算力成正比，最终会导致链的增长速度会不同，在经过一段时间之后，会出现其中一条链更长，最终，矿工在发现更长的链之后，会去同步更长的链上面的区块数据，丢弃原来的链。
    * 分叉-升级分叉
        1. 矿工不遵从不同的机制（规则）导致的分叉
        2. 硬分叉：如果区块链共识规则改变的情况下，规则不允许前向兼容，旧节点没有办法认可新节点产生的区块。
        3. 软分叉：如果区块链共识规则改变的情况下，规则允许前向兼容，旧节点认可新节点产生的区块。
    * 时间戳与不可簒改
        1. 在区块链系统中，获得记账权的节点在链节区块时，在区块头加盖时间戳，记录区块上链的时间。
        2. 时间戳可以证明特定的数据在特定的时间的存在。
    * 交易
        1. 概念：一笔资产在参与者之间的转移，比如数字货币等等。
        2. 内容： 
            - 交易金额 ：转移的资产量
            - 发送者：
            - 接收者：
            - 交易的id(hash)；交易的唯一标识，通常用hash表示
    * UTXO 交易模式(unspent transaction output)
        1. 未花费的交易输出：比特币独有的交易模式，比特币交易过程中的基本单位。
        2. 结构
            - 输入与输出
                1. 输入(tx in) 资金来源
                2. 输出(tx out)资金去向
                3. 创世区块：区块链里面第一个区块，创世区块产生的交易与挖矿产生的交易没有输入
    * 哈希
        1. 将任意原始数据（交易记录）通过指定的哈希函数，编码为特定长度的，由数字和字母组成的字符串
        2. 在区块链中的使用：对交易数据进行压缩编码，生成散列字符串
        3. 特点：
            - 不可逆：哈希值几乎不可能反推出源数据
            - 输入值即使只相差一个字符，结果也会天差地别
            - 时间正相关：输入的源数据越长，哈希函数处理时间越长。
    * merkle树
        1. merkle树可以是二叉树，也可以是多叉树，它具有树的所有特点。
        2. 在区块链中的作用：快速校验和归纳交易数据的完整性
        3. 在区块链中，merkle可以极大的提高效率，区块头只需要保存一个merkle根的哈希值，不需要存储所有的交易数据。
        4. merkle树支持spv(简化支付验证)，可以在不运行完整的网络节点情况下去对交易数据进行验证
    * 双重支付
        1. 双花：复用数字货币的数字特性，完成两次或者多次支付。
        2. 传统货币具有客观存在的唯一性，天然可以避免双化。
        3. 传统的虚拟货币支付依赖于可依赖的第三方机构提供保证。
        4. 区块链中需要达成只通过分布式节点之间的相互验证与共识机制来避免双花，同时完成价值转移。
        5. 比特币中，通过utxo交易模式以及数字签名验证来避免双花。
    * p2p
        1. 通过对等网络分配工作任务的分布应用架构。
        2. 网络中所有节点都是同等地位，不存在任何一个中心化节点，也不存在层级结构，每个网络都承担验证区块数据等功能
        3. 网络节点根据存储数据量的大小分为全节点和轻量级节点
            - 全节点：保存了创世区块产生以来的所有区块数据
                a. 优点：可以独立进行交易数据验证，不需要依靠其它节点，安全性极高
                b. 缺点：数量量太大
            - 轻量级节点：存储部分数据信息
                a. 优点：数量量小
                b. 缺点：不能独立验证交易数据，安全性相对而言比全节点低
    * 加密算法
        1. 通过一种算法手段，对原始信息进行转换，信息接收者通过密钥进行解密
            - 对称加密：加密和解密使用相同的密钥
            - 非对称加密：
                a. 采用公钥和私钥进行加密
                b. 公钥是公开的，任何人都可以拥有，私钥是保密的，只有加密者拥有
                c. 无法用公钥反推出私钥
    * 数字签名
        1. 在需要发送的信息后面加上一段内容，作为发送者的证明，另外还可以证明信息没有被修改。
    * 区块链分类
        1. 公有链:真正意义上的去中心化分布式区块链，任意节点可以随时、随地加入到一个公链的网络中。匿名性强，任何参与都可以在其中写入、读取、验证交易数据。代表比特币，以太坊。。。
        2. 私有链：部分中心化的区块链，具有分布式的特点。中心节点可以指定参与者（交易验证等）
            - 应用：私链可以在公司、机构、组织内部进行使用
        3. 联盟链:部分去中心化模式，拥有权限控制敲定的功能。
            - 优势：降低结算成本和时间，提升效率，同时继承中心化的优点，减轻垄断压力。
            - 代表：超级账本(Fabric)
    * 区块链架构特点
        1. 去中心化：区块链中的数据传输，验证等过程全都基于分布式系统，整个网络中没有中心机构的存在。
        2. 可靠数据库：区块链系统中，数据库采用分布式存储，任何一个节点都有一份完整的数据拷贝。参与系统的节点越多，数据库的安全性越高。
        3. 开源可编程：区块链系统基本都是开源的，公链代码高度透明，数据和程序对所有人公开。任何人都可以通过官方提供的接口查询数据。可编程-区块链提供灵活的脚本系统，支持用户创建高级智能合约，token，去中心化应用。
    * 集体维护：区块链中的数据由整个系统中所有具有记账的节点共同维护，任何一个节点破坏都不会影响整个系统的动作
    * 安全可信：现代密码学使得交易无法被伪造和簒改，通过分布式系统共与共识来抵御功击，具有极高的安全性。
    * 准匿名性：采用公钥相关的地址作为标识，不需要传统的CA证书等，也主不需要确认身份。用户只需要公开地址，不需要公开自己的身份。
































































