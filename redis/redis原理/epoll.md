# epoll

select 模式存在的三个问题
1. 能监听的fd最大不超过1024
2. 每次select都需要把所有要监听的fd都拷贝到内核空间
3. 每次都要遍历所有的fd来判断就绪状态

poll模式的问题
1. poll利用链表解决了select中监听fd上限的问题，但依然要遍历所有fd，如果监听较多，性能会下降

epoll模式中如何解决这些问题的？
1. 基于epoll实例中红黑树保存要监听的fd,理论上无上限，而且增删改查效率都非常高，性能不会随监听的fd数量增多而下降
2. 每个fd只需要执行一次epoll_ctl添加到红黑树，以后每次epol_wait无需传递任何参数，无需重复拷贝fd到内核空间
3. 内核会将就绪的fd直接拷贝到用户空间的指定位置，用户进程无需遍历所有fd就能知道就绪的fd是谁